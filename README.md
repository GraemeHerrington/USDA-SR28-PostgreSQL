# USDA-SR28-PostgreSQL

Support for the legacy USDA food nutrients database. Final version SR28

The USDA Food Nutrients database is currently (previously...) hosted at https://www.ars.usda.gov/northeast-area/beltsville-md-bhnrc/beltsville-human-nutrition-research-center/nutrient-data-laboratory/docs/ and is in the public domain. The site advertises SR28 as the final version of the current system. SR28 was released in September 2015. A series of updates is available from May 2016. Mostly this is adding commercial baby foods, but also addressed a number of miscalculated values. Further review seems to have indicated the problem with miscalculations is more widespread, leading to the revised approach. There is no published date for the new system but comments earlier this year suggested that it will be before the end of 2019.

There are several support files. A comprehensive set of scripts, tuned to Postgres, to load up the database and do some basic interrogations. It also holds a set of reports which were removed from the online offering some time ago. They are derived from SR 18 which is the revision (published 2005) still accessible on pgfoundry (http://pgfoundry.org/projects/dbsamples). For many people these reports which might otherwise lost, will be the best way of accessing the data because basic food items don't get revised that much compared to commercial items. While recipes and regulatory requirements on commercial product change, broccoli itself just doesn't evolve that quickly!

For those interested in the database, either as a technical exrecise, or for the data itself (in its various versions forms the backend of several commercial nutrition advice websites): The latest versions don't change structurally from one version to the next. I provide SQL which will create the database objects; a database command which deals with the 'metric' issue of micro- versus mille- grams; and a suite of shell commands to load the data. Additionally a couple of selects and views will provide a starting point for interrogating the data. I have not processed the updates file, nor have I included the 'language thesaurus' tables (though I am considering doing so, if only for completeness). The description file (sr28_doc.pdf) contains the information needed to reconstruct the database, and contains additional commentary on techniques, methods and definitions, including interpolations and should be considered required reading.

The platform addressed here is PostgreSQL on Linux for which I have tried to be comprehensive. You may learn something by searching for similar offerings for sqlite, oracle, mysql and so on, as well as Windows. In particular, I have tried to be more careful about datatypes than I have seen in some other repos, and I have not seen my solution to the 'mu' problem anywhere else. If yours is better, then let me know.

Using the database requires some care. 100 grams of a food, is not necessarily all food. I suspect many of the commercial offerings of this backend don't get everything right:

Is a skin part of the data on an orange say, or banana. Or is it waste. Ok. Then how about on an apple, a grape? What about egg shell? It is considered part of the weight of an egg but discarded as waste when it comes to nutritional value.

Similarly with broccoli, the stalk is considered waste - but then there is a separate category for broccoli stalk. If you use all of the broccoli, you will have to combine data from 2 places.
